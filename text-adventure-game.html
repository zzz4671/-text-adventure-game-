<yb_canvas uuid="a7b8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d" mversion="1" type="code" subtype="single">

<filename>æ–‡å­—å†’é™©æ¸¸æˆ.html</filename>

<yb_code lang="html"><![CDATA[<!DOCTYPE html>

<html>

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>å‘½è¿ï¼šå¼‚ä¹¡äºº | æ–‡å­—å†’é™©æ¸¸æˆ</title>

<style>

* { margin: 0; padding: 0; box-sizing: border-box; }body {font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;background: #1a1a2e;color: #e0e0e0;line-height: 1.6;padding: 20px;}.container {max-width: 900px;margin: 0 auto;background: rgba(0,0,0,0.8);padding: 20px;border-radius: 10px;border: 1px solid #333;}.game-header {text-align: center;margin-bottom: 30px;padding: 20px;background: linear-gradient(135deg, #0f3460, #16213e);border-radius: 10px;}.game-title {font-size: 2.5em;color: #ffd700;text-shadow: 2px 2px 4px rgba(0,0,0,0.5);margin-bottom: 10px;}.game-subtitle {color: #aaa;font-size: 1.2em;}.game-content {display: grid;grid-template-columns: 1fr 300px;gap: 20px;}.story-container {background: rgba(0,0,0,0.9);padding: 20px;border-radius: 10px;border: 1px solid #444;}.story-text {font-size: 1.1em;margin-bottom: 20px;min-height: 300px;}.choices {display: flex;flex-direction: column;gap: 10px;}.choice-btn {padding: 12px 20px;background: #2c3e50;color: white;border: none;border-radius: 5px;cursor: pointer;text-align: left;transition: all 0.3s;}.choice-btn:hover {background: #34495e;transform: translateX(5px);}.stats-panel {background: rgba(0,0,0,0.9);padding: 20px;border-radius: 10px;border: 1px solid #444;}.stat-item {margin: 10px 0;padding: 10px;background: rgba(255,255,255,0.05);border-radius: 5px;}.stat-bar {height: 10px;background: #444;border-radius: 5px;margin-top: 5px;overflow: hidden;}.stat-fill {height: 100%;background: #3498db;border-radius: 5px;}.health-fill { background: #e74c3c; }.sanity-fill { background: #9b59b6; }.stamina-fill { background: #2ecc71; }.dev-menu {position: fixed;top: 10px;right: 10px;background: rgba(0,0,0,0.95);color: #0f0;border: 2px solid #0f0;border-radius: 5px;font-family: monospace;font-size: 12px;z-index: 9999;width: 300px;}.dev-header {background: #111;padding: 8px 12px;cursor: pointer;font-weight: bold;display: flex;justify-content: space-between;}.dev-content {padding: 10px;max-height: 400px;overflow-y: auto;}.dev-section {margin-bottom: 15px;padding-bottom: 10px;border-bottom: 1px solid #333;}.dev-section h4 {margin: 0 0 8px 0;color: #0ff;font-size: 12px;}.attr-control {margin-bottom: 5px;padding: 3px 0;}.attr-control label {display: block;margin-bottom: 3px;color: #ccc;}.attr-buttons {display: flex;gap: 5px;align-items: center;}.attr-buttons button {background: #333;color: #0f0;border: 1px solid #0f0;padding: 2px 6px;border-radius: 3px;cursor: pointer;}.state-dump {background: #111;color: #0f0;padding: 8px;border-radius: 3px;font-size: 10px;max-height: 150px;overflow-y: auto;}button {background: #333;color: #0f0;border: 1px solid #0f0;padding: 4px 8px;margin: 2px;border-radius: 3px;cursor: pointer;}button:hover { background: #444; }.game-footer {text-align: center;margin-top: 20px;color: #666;font-size: 0.9em;}</style></head><body><div class="container"><div class="game-header"></div>

<div class="game-content">

<div class="story-container">

<div class="story-text" id="story-text">

</div>

<div class="choices" id="choices-container">

<button class="choice-btn" onclick="makeChoice(1)">å…ˆå»å­¦æ ¡æŠ¥åˆ°</button>

<button class="choice-btn" onclick="makeChoice(2)">è”ç³»ä¹‹å‰è”ç³»å¥½çš„ç§Ÿæˆ¿ä¸­ä»‹</button>

<button class="choice-btn" onclick="makeChoice(3)">åœ¨æœºåœºæ‰¾ä¸´æ—¶å·¥ä½œ</button>

</div>

</div>

<div class="stats-panel">

<div class="stat-item">

<div>ğŸ’° é‡‘é’±: ç¾å…ƒ</div>

</div>

<div class="stat-item">

<div>â¤ï¸ å¥åº·: /100</div>

<div class="stat-bar"><div class="stat-fill health-fill" id="health-bar" style="width: 100%"></div></div>

</div>

<div class="stat-item">

<div>ğŸ§  ç†æ™º: /100</div>

<div class="stat-bar"><div class="stat-fill sanity-fill" id="sanity-bar" style="width: 100%"></div></div>

</div>

<div class="stat-item">

<div>ğŸ’ª è€åŠ›: /100</div>

<div class="stat-bar"><div class="stat-fill stamina-fill" id="stamina-bar" style="width: 100%"></div></div>

</div>

<div class="stat-item">

<div>ğŸ¯ éšåŒ¿: /100</div>

</div>

<div class="stat-item">

<div>ğŸ€ è¿æ°”: /100</div>

</div>

<div class="stat-item">

<div>ğŸ’³ å€ºåŠ¡: ç¾å…ƒ</div>

</div>

<div class="stat-item">

<div>âš ï¸ æˆç˜¾: /100</div>

</div>

<div id="current-scene">S00 - æŠµè¾¾</div>

<div style="margin-top: 20px; color: #888; font-size: 0.9em;">

</div>

</div>

</div>

<div class="game-footer">

</div>

</div>

<!-- å¼€å‘è€…èœå• -->

<div id="dev-menu" class="dev-menu" style="display: none;">

<div class="dev-header" onclick="toggleDevMenu()">

ğŸ› ï¸ å¼€å‘è€…èœå• â–²

</div>

<div class="dev-content" id="dev-content">

<div class="dev-section">

<div class="attr-control">

<label>ğŸ’° é‡‘é’±: </label>

<div class="attr-buttons">

<button onclick="cheatMoney(100)">+100</button>

<button onclick="cheatMoney(1000)">+1000</button>

<button onclick="cheatMoney(10000)">+10000</button>

<button onclick="setMoney(0)">æ¸…é›¶</button>

</div>

</div>

<div class="attr-control">

<label>â¤ï¸ å¥åº·: /100</label>

<div class="attr-buttons">

<button onclick="setHealth(100)">å›æ»¡</button>

<button onclick="modifyHealth(-10)">-10</button>

<button onclick="modifyHealth(-20)">-20</button>

<button onclick="modifyHealth(10)">+10</button>

</div>

</div>

<div class="attr-control">

<label>ğŸ§  ç†æ™º: /100</label>

<div class="attr-buttons">

<button onclick="setSanity(100)">å›æ»¡</button>

<button onclick="modifySanity(-10)">-10</button>

<button onclick="modifySanity(10)">+10</button>

</div>

</div>

</div>

<div class="dev-section">

<button onclick="cheatGodMode()">ä¸Šå¸æ¨¡å¼</button>

<button onclick="cheatFullRestore()">å®Œå…¨æ¢å¤</button>

<button onclick="cheatClearDebt()">æ¸…é™¤å€ºåŠ¡</button>

<button onclick="cheatReset()">é‡ç½®çŠ¶æ€</button>

</div>

<div class="dev-section">

<select id="scene-select" onchange="jumpToScene(this.value)">

<option value="">é€‰æ‹©åœºæ™¯...</option>

<option value="S00">S00 - æŠµè¾¾</option>

<option value="S01">S01 - å­¦æ ¡æŠ¥åˆ°</option>

<option value="S02">S02 - ç§Ÿæˆ¿é­é‡</option>

<option value="S03">S03 - æ‰¾å·¥ä½œ</option>

<option value="S04">S04 - ç¬¬ä¸€å¤©å·¥ä½œ</option>

<option value="S05">S05 - è‰°éš¾æŠ‰æ‹©</option>

</select>

</div>

<div class="dev-section">

<button onclick="exportGame()">å¯¼å‡ºå­˜æ¡£</button>

<button onclick="importGame()">å¯¼å…¥å­˜æ¡£</button>

<input type="file" id="import-file" style="display: none" onchange="handleImportFile(event)">

<button onclick="copyGameState()">å¤åˆ¶çŠ¶æ€</button>

</div>

<div class="dev-section">

<div class="state-dump" id="state-dump">ç‚¹å‡»åˆ·æ–°æŸ¥çœ‹</div>

<button onclick="updateStateDump()">åˆ·æ–°çŠ¶æ€</button>

</div>

</div>

</div>

<script>

// æ¸¸æˆçŠ¶æ€

const gameState = {

money: 500,

health: 100,

sanity: 100,

stamina: 100,

stealth: 0,

luck: 0,

debt: 0,

addiction: 0,

day: 1,

scene: 'S00',

devMode: false

};

// æ•…äº‹æ•°æ®

const storyData = {

'S00': {

title: 'æŠµè¾¾',

text: 'é£æœºé™è½åœ¨è‚¯å°¼è¿ªæœºåœºï¼Œä½ æ‹–ç€æ²‰é‡çš„è¡Œæèµ°å‡ºèˆ±é—¨ã€‚è¿™é‡Œæ˜¯çº½çº¦ï¼Œæ— æ•°äººæ¢¦æƒ³å¼€å§‹çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯ä½ æœªçŸ¥å‘½è¿çš„å¼€ç«¯ã€‚ä½œä¸ºä¸€ä¸ªæ¥è‡ªä¸œæ–¹çš„ç•™å­¦ç”Ÿï¼Œä½ æ€€æ£ç€å®¶äººçš„æœŸæœ›å’Œè‡ªå·±çš„æ¢¦æƒ³è¸ä¸Šè¿™ç‰‡åœŸåœ°ã€‚ä½†ä½ çŸ¥é“ï¼Œæ¥ä¸‹æ¥çš„è·¯ä¸ä¼šå¹³å¦...',

choices: [

{ text: 'å…ˆå»å­¦æ ¡æŠ¥åˆ°', next: 'S01', money: -50, sanity: 5 },

{ text: 'è”ç³»ç§Ÿæˆ¿ä¸­ä»‹', next: 'S02', money: -200, sanity: -10 },

{ text: 'åœ¨æœºåœºæ‰¾ä¸´æ—¶å·¥ä½œ', next: 'S03', stamina: -20, money: 100 }

]

},

'S01': {

title: 'å­¦æ ¡æŠ¥åˆ°',

text: 'ä½ ä¹˜ååœ°é“æ¥åˆ°å­¦æ ¡ã€‚å›½é™…å­¦ç”ŸåŠå…¬å®¤çš„é˜Ÿä¼æ’å¾—å¾ˆé•¿ï¼Œç­‰äº†ä¸¤ä¸ªå°æ—¶æ‰è½®åˆ°ä½ ã€‚å·¥ä½œäººå‘˜å‘Šè¯‰ä½ ï¼Œå­¦è´¹è¿˜æ¬ ç€3000ç¾å…ƒï¼Œéœ€è¦åœ¨ä¸¤å‘¨å†…ç¼´æ¸…ï¼Œå¦åˆ™ä¼šå½±å“ç­¾è¯çŠ¶æ€ã€‚',

choices: [

{ text: 'æ‰“ç”µè¯å‘å®¶é‡Œæ±‚åŠ©', next: 'S05', sanity: 10, debt: 0 },

{ text: 'ç”³è¯·æ ¡å†…æ‰“å·¥', next: 'S03', sanity: -5, stamina: -10 },

{ text: 'æ‰¾é«˜åˆ©è´·å€Ÿé’±', next: 'S05', money: 3000, debt: 3500, sanity: -20 }

]

},

'S02': {

title: 'ç§Ÿæˆ¿é­é‡',

text: 'ä¸­ä»‹å¸¦ä½ æ¥åˆ°å¸ƒé²å…‹æ—çš„ä¸€é—´åœ°ä¸‹å®¤ã€‚æˆ¿é—´åªæœ‰10å¹³ç±³ï¼Œçª—æˆ·å¯¹ç€å¢™å£ï¼Œä½†æœˆç§Ÿè¦800ç¾å…ƒã€‚ä¸­ä»‹å‘Šè¯‰ä½ ï¼Œè¿™æ˜¯é™„è¿‘æœ€ä¾¿å®œçš„äº†ï¼Œè€Œä¸”éœ€è¦æŠ¼ä¸€ä»˜ä¸‰ã€‚',

choices: [

{ text: 'å’¬ç‰™ç§Ÿä¸‹', next: 'S04', money: -3200, sanity: -15, stamina: -5 },

{ text: 'å…ˆä½é’æ—…å†æ‰¾', next: 'S04', money: -200, sanity: -5 },

{ text: 'æ‰¾åäººåˆ†ç§Ÿæˆ¿', next: 'S04', money: -600, sanity: -10, stealth: 5 }

]

},

'S03': {

title: 'æ‰¾å·¥ä½œ',

text: 'ä½ åœ¨è¡—å¤´çœ‹åˆ°ä¸­é¤é¦†æ‹›å·¥å¹¿å‘Šï¼Œæ—¶è–ª8ç¾å…ƒã€‚è€æ¿æ˜¯ä¸ªç¦å»ºäººï¼Œæ‰“é‡äº†ä½ ä¸€ç•ªè¯´ï¼š"æ²¡èº«ä»½ï¼Ÿç°é‡‘å·¥ï¼Œæ¯å¤©12å°æ—¶ï¼Œæ„¿æ„å°±æ˜å¤©æ¥ã€‚"',

choices: [

{ text: 'æ¥å—å·¥ä½œ', next: 'S04', money: 300, stamina: -30, sanity: -20 },

{ text: 'ç»§ç»­æ‰¾åˆæ³•å·¥ä½œ', next: 'S01', money: -100 },

{ text: 'è¯•è¯•å¤–å–å¹³å°', next: 'S04', money: 200, stamina: -25, luck: 5 }

]

},

'S04': {

title: 'ç¬¬ä¸€å¤©å·¥ä½œ',

text: 'å‡Œæ™¨4ç‚¹èµ·åºŠï¼ŒæŒ¤åœ°é“åˆ°é¤é¦†ã€‚ä»æ—©åˆ°æ™šæ´—ç›˜å­ã€åˆ‡èœã€æ‰“æ‰«å«ç”Ÿã€‚è€æ¿æ•…æ„æ‰¾èŒ¬æ‰£äº†ä½ åŠå¤©å·¥èµ„ã€‚æ™šä¸Š11ç‚¹å›åˆ°ä½å¤„ï¼Œæµ‘èº«é…¸ç—›ã€‚',

choices: [

{ text: 'å’¬ç‰™åšæŒ', next: 'S05', money: 200, health: -10, stamina: -20 },

{ text: 'ä¹°ç“¶é…’è§£ä¹', next: 'S05', money: -20, health: -5, sanity: 5, addiction: 5 },

{ text: 'å»æ•™å ‚æ±‚åŠ©', next: 'S01', sanity: 10, luck: 5 }

]

},

'S05': {

title: 'è‰°éš¾æŠ‰æ‹©',

text: 'ç¬¬ä¸€ä¸ªæœˆçš„è´¦å•æ¥äº†ï¼šæˆ¿ç§Ÿ800ã€ç”µè¯è´¹50ã€äº¤é€šè´¹120ã€é£Ÿç‰©200ï¼Œè€Œä½ æ‰“å·¥åªèµšäº†1200ç¾å…ƒã€‚è¿˜æ¬ ç€å­¦è´¹3000ã€‚ä½ çœ‹ç€çª—å¤–çš„çº½çº¦å¤œæ™¯ï¼Œé™·å…¥äº†æ²‰æ€...',

choices: [

{ text: 'æ‰“é»‘å·¥å¤šèµšé’±', next: 'S03', money: 500, stamina: -30, stealth: 10 },

{ text: 'ç”³è¯·åŠ©å­¦è´·æ¬¾', next: 'S01', debt: 5000, sanity: 10 },

{ text: 'è”ç³»è›‡å¤´æƒ³åˆ«çš„åŠæ³•', next: 'END1', stealth: 20, sanity: -30 }

]

},

'END1': {

title: 'ç»“å±€ï¼šæœªçŸ¥ä¹‹è·¯',

text: 'ä¸‰ä¸ªæœˆåï¼Œä½ åœ¨å‰å¾€ç¾å¢¨è¾¹å¢ƒçš„å¡è½¦ä¸Šè¢«æ•ã€‚é£è¿”ã€é»‘åå•ã€æ¢¦æƒ³ç ´ç­ã€‚ä½†è¿™ä¹Ÿè®¸ä¸æ˜¯ç»ˆç‚¹ï¼Œåªæ˜¯å¦ä¸€æ®µæŒ£æ‰çš„å¼€å§‹...',

choices: [

{ text: 'é‡æ–°å¼€å§‹', next: 'S00' }

]

}

};

// æ›´æ–°UI

function updateUI() {

// æ›´æ–°çŠ¶æ€

document.getElementById('money').textContent = gameState.money;

document.getElementById('health').textContent = gameState.health;

document.getElementById('sanity').textContent = gameState.sanity;

document.getElementById('stamina').textContent = gameState.stamina;

document.getElementById('stealth').textContent = gameState.stealth;

document.getElementById('luck').textContent = gameState.luck;

document.getElementById('debt').textContent = gameState.debt;

document.getElementById('addiction').textContent = gameState.addiction;

document.getElementById('current-scene').textContent = 
"${gameState.scene} - ${storyData[gameState.scene]?.title || 'æœªçŸ¥'}";

// æ›´æ–°è¿›åº¦æ¡

document.getElementById('health-bar').style.width = 
"${gameState.health}%";

document.getElementById('sanity-bar').style.width = 
"${gameState.sanity}%";

document.getElementById('stamina-bar').style.width = 
"${gameState.stamina}%";

// æ›´æ–°å¼€å‘è€…é¢æ¿

document.getElementById('dev-money').textContent = gameState.money;

document.getElementById('dev-health').textContent = gameState.health;

document.getElementById('dev-sanity').textContent = gameState.sanity;

// æ›´æ–°åœºæ™¯ä¸‹æ‹‰æ¡†

document.getElementById('scene-select').value = gameState.scene;

// æ›´æ–°æ•…äº‹æ–‡æœ¬

const scene = storyData[gameState.scene];

if (scene) {

document.getElementById('story-text').innerHTML = `

`;

// æ›´æ–°é€‰æ‹©

const choicesContainer = document.getElementById('choices-container');

choicesContainer.innerHTML = '';

scene.choices.forEach((choice, index) => {

const button = document.createElement('button');

button.className = 'choice-btn';

button.textContent = choice.text;

button.onclick = () => makeChoice(index);

choicesContainer.appendChild(button);

});

}

// æ£€æŸ¥æ¸¸æˆç»“æŸæ¡ä»¶

checkGameOver();

}

// åšå‡ºé€‰æ‹©

function makeChoice(choiceIndex) {

const scene = storyData[gameState.scene];

if (!scene || !scene.choices[choiceIndex]) return;

const choice = scene.choices[choiceIndex];

// åº”ç”¨æ•ˆæœ

if (choice.money) gameState.money += choice.money;

if (choice.health) gameState.health = Math.max(0, Math.min(100, gameState.health + choice.health));

if (choice.sanity) gameState.sanity = Math.max(0, Math.min(100, gameState.sanity + choice.sanity));

if (choice.stamina) gameState.stamina = Math.max(0, Math.min(100, gameState.stamina + choice.stamina));

if (choice.stealth) gameState.stealth = Math.max(0, Math.min(100, gameState.stealth + choice.stealth));

if (choice.luck) gameState.luck = Math.max(0, Math.min(100, gameState.luck + choice.luck));

if (choice.debt) gameState.debt += choice.debt;

if (choice.addiction) gameState.addiction = Math.max(0, Math.min(100, gameState.addiction + choice.addiction));

// è½¬åˆ°ä¸‹ä¸€åœºæ™¯

if (choice.next) {

gameState.scene = choice.next;

if (choice.next !== 'END1') {

gameState.day++;

}

}

updateUI();

}

// æ£€æŸ¥æ¸¸æˆç»“æŸ

function checkGameOver() {

if (gameState.health <= 0) {

gameState.scene = 'END1';

storyData['END1'] = {

title: 'ç»“å±€ï¼šç²¾ç–²åŠ›ç«­',

text: 'è¿ç»­çš„é«˜å¼ºåº¦å·¥ä½œå’Œè¥å…»ä¸è‰¯å‡»å®äº†ä½ ã€‚åœ¨ä¸€ä¸ªå¯’å†·çš„å†¬å¤œï¼Œä½ å› è‚ºç‚æ™•å€’åœ¨è¡—å¤´ï¼Œå†ä¹Ÿæ²¡æœ‰é†’æ¥ã€‚å¼‚ä¹¡çš„æ¢¦ï¼Œå°±æ­¤ç»ˆç»“ã€‚',

choices: [{ text: 'é‡æ–°å¼€å§‹', next: 'S00' }]

};

updateUI();

} else if (gameState.sanity <= 0) {

gameState.scene = 'END1';

storyData['END1'] = {

title: 'ç»“å±€ï¼šç²¾ç¥å´©æºƒ',

text: 'å·¨å¤§çš„å‹åŠ›å’Œå­¤ç‹¬æ„Ÿè®©ä½ å½»åº•å´©æºƒã€‚ä½ è¢«é€è¿›ç²¾ç¥ç—…é™¢ï¼Œéšåè¢«é£è¿”å›å›½ã€‚å®¶äººçœ‹åˆ°çš„ï¼Œåªæ˜¯ä¸€ä¸ªçœ¼ç¥ç©ºæ´çš„é™Œç”Ÿäººã€‚',

choices: [{ text: 'é‡æ–°å¼€å§‹', next: 'S00' }]

};

updateUI();

} else if (gameState.money <= -10000) {

gameState.scene = 'END1';

storyData['END1'] = {

title: 'ç»“å±€ï¼šå€ºåŠ¡æ·±æ¸Š',

text: 'é«˜åˆ©è´·çš„åˆ©æ»šåˆ©è®©ä½ æ°¸è¿œæ— æ³•ç¿»èº«ã€‚åœ¨ä¸€ä¸ªé›¨å¤œï¼Œè®¨å€ºäººæ‰¾åˆ°äº†ä½ ã€‚ç¬¬äºŒå¤©ï¼Œäººä»¬åœ¨ä¸œæ²³å‘ç°äº†ä½ çš„å°¸ä½“ã€‚',

choices: [{ text: 'é‡æ–°å¼€å§‹', next: 'S00' }]

};

updateUI();

} else if (gameState.addiction >= 100) {

gameState.scene = 'END1';

storyData['END1'] = {

title: 'ç»“å±€ï¼šå •è½',

text: 'æ¯’å“æ¯æ‰äº†ä½ çš„ä¸€åˆ‡ã€‚ä¸ºäº†ä¸‹ä¸€å‰‚ï¼Œä½ å·çªƒã€æŠ¢åŠ«ï¼Œæœ€ç»ˆåœ¨å¸®æ´¾ç«æ‹¼ä¸­ä¸§ç”Ÿã€‚æ²¡äººçŸ¥é“ä½ çš„åå­—ï¼Œæ²¡äººè®°å¾—ä½ çš„æ•…äº‹ã€‚',

choices: [{ text: 'é‡æ–°å¼€å§‹', next: 'S00' }]

};

updateUI();

}

}

// å¼€å‘è€…èœå•åŠŸèƒ½

function toggleDevMenu() {

const menu = document.getElementById('dev-menu');

const content = document.getElementById('dev-content');

const header = menu.querySelector('.dev-header');

if (menu.style.display === 'none' || menu.style.display === '') {

menu.style.display = 'block';

header.innerHTML = 'ğŸ› ï¸ å¼€å‘è€…èœå• â–¼';

updateStateDump();

} else {

menu.style.display = 'none';

header.innerHTML = 'ğŸ› ï¸ å¼€å‘è€…èœå• â–²';

}

}

function cheatMoney(amount) {

gameState.money += amount;

updateUI();

}

function setMoney(value) {

gameState.money = parseInt(value) || 0;

updateUI();

}

function setHealth(value) {

gameState.health = Math.max(0, Math.min(100, parseInt(value) || 100));

updateUI();

}

function modifyHealth(amount) {

gameState.health = Math.max(0, Math.min(100, gameState.health + amount));

updateUI();

}

function setSanity(value) {

gameState.sanity = Math.max(0, Math.min(100, parseInt(value) || 100));

updateUI();

}

function modifySanity(amount) {

gameState.sanity = Math.max(0, Math.min(100, gameState.sanity + amount));

updateUI();

}

function cheatGodMode() {

gameState.money = 999999;

gameState.health = 100;

gameState.sanity = 100;

gameState.stamina = 100;

gameState.debt = 0;

gameState.addiction = 0;

updateUI();

alert('ä¸Šå¸æ¨¡å¼æ¿€æ´»ï¼');

}

function cheatFullRestore() {

gameState.health = 100;

gameState.sanity = 100;

gameState.stamina = 100;

updateUI();

alert('çŠ¶æ€å·²å®Œå…¨æ¢å¤ï¼');

}

function cheatClearDebt() {

gameState.debt = 0;

updateUI();

alert('å€ºåŠ¡å·²æ¸…é™¤ï¼');

}

function cheatReset() {

if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰çŠ¶æ€å—ï¼Ÿ')) {

gameState.money = 500;

gameState.health = 100;

gameState.sanity = 100;

gameState.stamina = 100;

gameState.stealth = 0;

gameState.luck = 0;

gameState.debt = 0;

gameState.addiction = 0;

gameState.day = 1;

gameState.scene = 'S00';

updateUI();

alert('çŠ¶æ€å·²é‡ç½®ï¼');

}

}

function jumpToScene(sceneId) {

if (sceneId && storyData[sceneId]) {

gameState.scene = sceneId;

updateUI();

}

}

function exportGame() {

const saveData = {

...gameState,

timestamp: new Date().toISOString(),

version: '1.0'

};

const dataStr = JSON.stringify(saveData, null, 2);

const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

const exportFileDefaultName = 
"å¼‚ä¹¡äººå­˜æ¡£_${new Date().getTime()}.json";

const linkElement = document.createElement('a');

linkElement.setAttribute('href', dataUri);

linkElement.setAttribute('download', exportFileDefaultName);

linkElement.click();

}

function importGame() {

document.getElementById('import-file').click();

}

function handleImportFile(event) {

const file = event.target.files[0];

if (!file) return;

const reader = new FileReader();

reader.onload = function(e) {

try {

const data = JSON.parse(e.target.result);

Object.assign(gameState, data);

updateUI();

alert('å­˜æ¡£å·²å¯¼å…¥ï¼');

} catch (err) {

alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯');

}

event.target.value = '';

};

reader.readAsText(file);

}

function copyGameState() {

const stateText = JSON.stringify(gameState, null, 2);

navigator.clipboard.writeText(stateText).then(() => {

alert('æ¸¸æˆçŠ¶æ€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');

}).catch(() => {

const textArea = document.createElement('textarea');

textArea.value = stateText;

document.body.appendChild(textArea);

textArea.select();

document.execCommand('copy');

document.body.removeChild(textArea);

alert('æ¸¸æˆçŠ¶æ€å·²å¤åˆ¶ï¼');

});

}

function updateStateDump() {

document.getElementById('state-dump').textContent = JSON.stringify(gameState, null, 2);

}

// å…¨å±€å¿«æ·é”®

document.addEventListener('keydown', function(e) {

// Ctrl+Shift+D åˆ‡æ¢å¼€å‘è€…èœå•

if (e.ctrlKey && e.shiftKey && e.key === 'D') {

e.preventDefault();

const menu = document.getElementById('dev-menu');

if (menu.style.display === 'none' || menu.style.display === '') {

toggleDevMenu();

} else {

toggleDevMenu();

}

}

// åœ¨å¼€å‘è€…æ¨¡å¼ä¸‹

if (document.getElementById('dev-menu').style.display !== 'none') {

// Ctrl+M åŠ é’±

if (e.ctrlKey && e.key === 'm') {

e.preventDefault();

cheatMoney(1000);

}

// Ctrl+H å›è¡€

if (e.ctrlKey && e.key === 'h') {

e.preventDefault();

cheatFullRestore();

}

// Ctrl+G ä¸Šå¸æ¨¡å¼

if (e.ctrlKey && e.key === 'g') {

e.preventDefault();

cheatGodMode();

}

}

});

// åˆå§‹åŒ–æ¸¸æˆ

updateUI();

// æ§åˆ¶å°å‘½ä»¤

window.cheat = {

money: (amount = 10000) => { cheatMoney(amount); console.log(
"ğŸ’° é‡‘é’±+${amount}"); },

health: () => { cheatFullRestore(); console.log('â¤ï¸ çŠ¶æ€å›æ»¡'); },

god: () => { cheatGodMode(); console.log('âœ¨ ä¸Šå¸æ¨¡å¼'); },

scene: (sceneId) => { jumpToScene(sceneId); console.log(
"ğŸ“ è·³è½¬åˆ° ${sceneId}"); },

menu: () => { toggleDevMenu(); console.log('ğŸ› ï¸ å¼€å‘è€…èœå•'); }

};

console.log('ğŸ® æ¸¸æˆå·²åŠ è½½ï¼');

console.log('ğŸ› ï¸ è¾“å…¥ cheat.menu() æ‰“å¼€å¼€å‘è€…èœå•');

console.log('ğŸ’° è¾“å…¥ cheat.money(5000) åŠ 5000é‡‘é’±');

console.log('âœ¨ è¾“å…¥ cheat.god() å¼€å¯ä¸Šå¸æ¨¡å¼');

</script>

</body>

</html>]]></yb_code>

</yb_canvas>